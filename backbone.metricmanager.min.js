(function(e,t){"use strict";if(!e)throw"Backbone not found";var n=e.MetricManager={};n.addMetricManager=function(e){if(!e)throw"Target must be defined";if(!e.metrics)throw"Metrics object not defined";e.triggerMetric=t.bind(n.triggerMetric,e)};n.triggerMetric=function(e,n){if(!e)return;var r=this.metrics[e];r._action=e;n=n||function(){};r.engine||(r.engine="ga");switch(r.engine){case"ga":if(!window._gaq)throw"Google Analytics missing";window._gaq.push(["_trackEvent",r.category||"",r._action||"",r.label||"",r.value||0]);n&&window._gaq.push(["_set","hitCallback",n.call(this)]);break;case"mixpanel":if(!window.mixpanel)throw"Mixpanel missing";window.mixpanel.track(r._action,t.omit(r,["_action","engine"]),n.call(this));break;default:throw"No supported engine found"}}})(window.Backbone,window._);